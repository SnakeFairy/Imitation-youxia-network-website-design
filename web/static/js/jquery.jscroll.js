$.fn.extend({jscroll:function(){return this.each(function(){function c(){n<0&&(n=0);n>i-r&&(n=i-r);u.css({marginTop:n==0?"":n});var t=-(n*f/i);t=t>0?0:t;e.css({marginTop:t})}var t=$(this),i=t.height(),e=t.find(".jscroll-c"),o=t.find(".jscroll-e"),u=t.find(".jscroll-h"),f=e.height(),r=Math.pow(i,2)/f,s=r/6,n=0,h=!1;u.height(r);f<=i?o.hide():(o.show(),h=!0);u.on("mousedown",function(t){var i=t.pageY,r=parseInt($(this).css("marginTop"));return $(document).mousemove(function(t){n=r+t.pageY-i;c()}),$(document).mouseup(function(){$(document).unbind()}),!1});t.mousewheell(function(){h==!0&&(this.D>0?n-=s:n+=s,c())})})},mousewheell:function(n){return this.each(function(){this.D=0;navigator.userAgent.indexOf("Firefox")>0?this.addEventListener("DOMMouseScroll",function(t){this.D=t.detail>0?-1:1;t.preventDefault();n&&n.call(this)},!1):this.onmousewheel=function(t){t=window.event||t;this.D=t.wheelDelta;t.returnValue=!1;n&&n.call(this)}})}});